<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>도전문제 - [구조분해, spesad연산]</title>
  </head>
  <body>
    <script type="text/javascript">
      let items = [
        { id: 1, name: "벤치프레스", count: 10 },
        { id: 2, name: "랫풀다운", count: 12 },
        { id: 3, name: "스쿼트", count: 30 },
      ];
      //추가 - 전개연산자
      //배열만 있을 때, 객체만 있을 때, 배열안에 객체가 있을 때
      document.write("<thred>추가하기</thred>");
      let items_add = [...items, { id: 4, name: "발차기", count: 1 }];
      /* items_add.forEach((item) => {
        document.write(`${item.id}: ${item.name}(${item.count})<br/>`);
      }); */
      document.write("<div>");
      document.write("<table border ='1' borderColor = 'blue'");
      items_add.forEach((item) => {
        document.write("<tr>");
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write("</tr>");
      });
      document.write("</table>");
      document.write("</div>");
      document.write("<hr>");

      //삭제 - filter함수
      //prompt로 받으면 반환값이 문자열 - 주의 (===,!== 사용 시 타입도 따짐)
      let result = window.prompt("삭제할 id를 입력"); // 창 열어주는
      alert("사용자가 선택한거" + result + "임");
      document.write("<thred>삭제하기</thred>");
      // arr.filter(callback(element[, index[, array]]))[, thisArg]
      //filter함수는 조건을 수렴하는 것만 남겨서 새로운 배열을 반환
      //let newitems = items.filter((row) => row.id != result)
      let newitems = items.filter((row) => row.id !== parseInt(result));
      document.write("<div>");
      document.write("<table border ='1' borderColor = 'blue'");
      newitems.forEach((item) => {
        document.write("<tr>");
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write("</tr>");
      });
      document.write("</table>");
      document.write("</div>");
      document.write("<hr>");

      let x = [...items];
      //수정 - 추가 동일
      document.write("<thred>수정하기</thred>");
      result = window.prompt("수정할 id를 입력");
      items.forEach((item) => {
        if (item.id === parseInt(result)) {
          x = items.filter((item) => item.id !== parseInt(result));
          x = [...x, { id: `${parseInt(result)}`, name: "말타기", count: 2 }];
        }
      });
      document.write("<div>");
      document.write("<table border ='1' borderColor = 'green'");
      x.forEach((item) => {
        document.write("<tr>");
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write("</tr>");
      });
      document.write("</table>");
      document.write("</div>");
      document.write("<hr>");

      //조회 -forEach
      //더블쿼테이션과 싱글쿼테이션
      //문제는 같이 사용할 경우 바깥쪽 더블, 안쪽 싱글
      document.write("<thred>조회하기</thred>");
      document.write("<div>");
      document.write("<table border ='1' borderColor = 'green'");
      items.forEach((item) => {
        document.write("<tr>");
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write("</tr>");
      });
      document.write("</table>");
      document.write("</div>");
    </script>
  </body>
</html>
